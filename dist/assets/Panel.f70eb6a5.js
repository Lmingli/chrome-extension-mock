import{_ as W}from"./index.95ad8715.js";import{k as h,a6 as G,m as X,a7 as Y,l as Z,a8 as ee,P as te,Q as ae,q as ne,a9 as oe,aa as le,ab as se,o as v,g as ce,a as o,w as n,c as g,u as A,i as b,F as re,v as m,x as _,j as p,t as ie,ac as pe}from"./vendor.1991cdbb.js";import{s as c,_ as ue,a as de}from"./Setting.eb72eacf.js";import{_ as me}from"./plugin-vue_export-helper.21dcd24c.js";const _e=p("\u5237\u65B0"),fe=p("\u5168\u90E8\u6E05\u7A7A"),ve=p("\u5F53\u524D"),ye=p("\u9009\u62E9"),he=p("\u5220\u9664"),ge=p("\u53D6\u6D88\u5DF2\u9009\u62E9"),ke=p("\u5220\u9664"),Ce={setup(we){console.log(c);const V=h({}),k=G([]),B=[{slot:"expand"},{label:"url",prop:"key",formatter:(e,t,a,r)=>a.replace(V.value.listUrlRemoveStr,""),minWidth:"200px"},{label:"count",prop:"count"},{label:"size",prop:"size"}],C=async()=>{try{const e=await c.get();let t=[];for(let a in e){if(a==="setting"){V.value=e[a];continue}a!=="tmp"&&t.push({key:a,value:e[a],count:e[a]instanceof Array?e[a].length:JSON.stringify(e[a]),size:JSON.stringify(e[a]).length})}k.value=t}catch(e){console.log(e)}};X(()=>{try{C(),c.onchange(C)}catch(e){console.log(e)}});const $=[{label:"method",prop:"method"},{label:"requestParams",prop:"requestParams"},{label:"requestBody",prop:"requestBody","show-overflow-tooltip":!0},{label:"response",prop:"response","show-overflow-tooltip":!0}],q=async({key:e})=>{await c.remove(e),_.success("\u5220\u9664\u6210\u529F"),k.value.splice(k.value.findIndex(t=>t.key===e),1)},R=({value:e})=>e.findIndex(t=>t.active===!0)>-1,S=async({key:e,value:t})=>{t.find(a=>a.active===!0).active=!1,await c.set({[e]:m(t)})},T=async()=>{try{await pe.confirm("\u662F\u5426\u786E\u5B9A\u6E05\u7A7A\uFF1F","\u63D0\u793A"),await c.clear(),_.success("\u6E05\u7A7A\u6210\u529F"),C()}catch(e){console.log(e)}},x=h(""),f=h([]),U=(e,t)=>{f.value=t.map(a=>a.key)},j=({key:e,value:t},a)=>{t instanceof Array&&(["key","operate"].includes(a.property)||(f.value.includes(e)?f.value.splice(f.value.indexOf(e),1):f.value.push(e)))},I=({row:e,rowIndex:t})=>(console.log(t),{"background-color":t%2==0?"rgb(236, 245, 255)":"rgb(245, 254, 240)"}),N=async e=>{let t=e.value;for(let a of t)a.active=!1;await c.set({[e.key]:m(t)}),_.success("\u8BBE\u7F6E\u6210\u529F")},M=async(e,t)=>{let a=e.value;for(let r of a)r.active=!1;a.find(r=>r.timestamp===t.timestamp).active=!0,console.log(m(a)),await c.set({[e.key]:m(a)}),_.success("\u8BBE\u7F6E\u6210\u529F")},z=async(e,t)=>{let a=e.value;const r=a.findIndex(i=>i.timestamp===t.timestamp);a.splice(r,1),await c.set({[e.key]:m(a)}),_.success("\u5220\u9664\u6210\u529F")},O=async(e,t)=>{let a=e.value;a.find(r=>r.timestamp===t.timestamp).name=t.name,await c.set({[e.key]:m(a)}),_.success("\u8BBE\u7F6E\u6210\u529F")},F=Y(()=>W(()=>import("./ResponseTextDialog.3487d677.js"),["assets/ResponseTextDialog.3487d677.js","assets/ResponseTextDialog.2fb29c68.css","assets/vendor.1991cdbb.js","assets/vendor.00dccd5e.css","assets/Setting.eb72eacf.js","assets/Setting.f86a1a38.css","assets/plugin-vue_export-helper.21dcd24c.js"])),w=h(!1),E=h(),u=Z({timestamp:"",row:{},property:""}),H=function(e,t,a){["requestParams","requestBody","response"].includes(t.property)&&(E.value=e[t.property],w.value=!0,u.timestamp=e.timestamp,u.row=a,u.property=t.property)},J=async e=>{console.log(e);let t=u.row.value;t.find(a=>a.timestamp===u.timestamp)[u.property]=e,await c.set({[u.row.key]:m(t)}),_.success("\u4FDD\u5B58\u6210\u529F")};return(e,t)=>{const a=ue,r=ee,i=te,P=ae,y=ne,D=de,K=oe,L=le,Q=se;return v(),ce(re,null,[o(Q,{style:{height:"100%"}},{default:n(()=>[o(r,{height:"auto"},{default:n(()=>[o(a)]),_:1}),o(L,null,{default:n(()=>[o(i,{type:"primary",onClick:C},{default:n(()=>[_e]),_:1}),o(i,{type:"danger",onClick:T},{default:n(()=>[fe]),_:1}),o(P,{modelValue:x.value,"onUpdate:modelValue":t[0]||(t[0]=l=>x.value=l),placeholder:"url\u8FC7\u6EE4",style:{"margin-left":"12px",width:"140px"},clearable:""},null,8,["modelValue"]),o(D,{data:A(k).filter(l=>l.key.includes(x.value)),column:B,style:{"margin-top":"10px"},"row-key":"key","expand-row-keys":f.value,onRowClick:j,onExpandChange:U,"row-style":I,stripe:!1},{expand:n(()=>[o(y,{type:"expand",align:"center"},{default:n(({row:l})=>[l.value instanceof Array?(v(),g(D,{key:0,data:l.value,column:$,"show-header":!1,class:"table-inside",onRowClick:(s,d)=>H(s,d,l)},{before:n(()=>[o(y,{align:"center",width:"100px"},{default:n(({row:s})=>[s.active?(v(),g(i,{key:0,type:"success",onClick:d=>N(l)},{default:n(()=>[ve]),_:2},1032,["onClick"])):(v(),g(i,{key:1,onClick:d=>M(l,s)},{default:n(()=>[ye]),_:2},1032,["onClick"]))]),_:2},1024)]),after:n(()=>[o(y,{align:"center"},{default:n(({row:s})=>[o(P,{modelValue:s.name,"onUpdate:modelValue":d=>s.name=d,placeholder:"\u8F93\u5165\u540D\u79F0"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),o(y,{align:"center",width:"240px"},{default:n(({row:s})=>[o(i,{type:"primary",onClick:d=>O(l,s)},{default:n(()=>[p(ie(s.name?"\u4FEE\u6539":"\u8BBE\u7F6E")+"\u540D\u79F0",1)]),_:2},1032,["onClick"]),o(i,{type:"danger",onClick:d=>z(l,s)},{default:n(()=>[he]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["data","onRowClick"])):b("",!0)]),_:1})]),after:n(()=>[o(y,{label:"\u64CD\u4F5C",align:"center",prop:"operate",width:"300px"},{default:n(({row:l})=>[R(l)?(v(),g(i,{key:0,type:"warning",onClick:s=>S(l)},{default:n(()=>[ge]),_:2},1032,["onClick"])):b("",!0),o(K,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",onConfirm:s=>q(l)},{reference:n(()=>[o(i,{type:"danger"},{default:n(()=>[ke]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data","expand-row-keys"])]),_:1})]),_:1}),w.value?(v(),g(A(F),{key:0,modelValue:w.value,"onUpdate:modelValue":t[1]||(t[1]=l=>w.value=l),data:E.value,onChange:J},null,8,["modelValue","data"])):b("",!0)],64)}}};var Pe=me(Ce,[["__scopeId","data-v-49e91dd7"]]);export{Pe as default};
