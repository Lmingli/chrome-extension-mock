import{_ as Z}from"./index.3d02c6e8.js";import{k as g,a6 as ee,m as te,a7 as ae,l as ne,a8 as oe,P as le,Q as se,q as ce,J as re,a9 as ie,aa as ue,ab as pe,o as y,g as de,a as l,w as n,c as k,u as q,i as b,F as me,v as _,x as f,j as p,t as A,ac as _e}from"./vendor.1991cdbb.js";import{s as i,_ as fe,a as ve}from"./Setting.18274e34.js";import{_ as ye}from"./plugin-vue_export-helper.21dcd24c.js";const he=p("\u5237\u65B0"),ge=p("\u5168\u90E8\u6E05\u7A7A"),ke=p("\u5F53\u524D"),Ce=p("\u9009\u62E9"),we=p("\u5220\u9664"),xe=p("\u53D6\u6D88\u5DF2\u9009\u62E9"),be=p("\u65B0\u589E"),Ve=p("\u5220\u9664"),Ee={setup(Pe){console.log(i);const V=g({}),h=ee([]),B=[{slot:"expand"},{slot:"url"},{label:"count",prop:"count"},{label:"size",prop:"size"}],$=e=>{let t=e;for(let a of V.value.listUrlRemoveStr)t=t.replace(a,"");return t},C=async()=>{try{const e=await i.get();let t=[];for(let a in e){if(a==="setting"){V.value=e[a];continue}a!=="tmp"&&t.push({key:a,value:e[a],count:e[a]instanceof Array?e[a].length:JSON.stringify(e[a]),size:JSON.stringify(e[a]).length})}h.value=t}catch(e){console.log(e)}};te(()=>{try{C(),i.onchange(C)}catch(e){console.log(e)}});const T=[{label:"method",prop:"method"},{label:"requestParams",prop:"requestParams"},{label:"requestBody",prop:"requestBody","show-overflow-tooltip":!0},{label:"response",prop:"response","show-overflow-tooltip":!0}],U=async({key:e})=>{await i.remove(e),f.success("\u5220\u9664\u6210\u529F"),h.value.splice(h.value.findIndex(t=>t.key===e),1)},I=({value:e})=>e.findIndex(t=>t.active===!0)>-1,R=async({key:e,value:t})=>{t.find(a=>a.active===!0).active=!1,await i.set({[e]:_(t)})},S=({key:e})=>{const t=h.value.find(c=>c.key===e),a=t.value[t.value.length-1];t.value.push({active:!1,method:a.method,name:"",requestBody:"{}",requestParams:"{}",response:"{}",timestamp:Date.now()}),u.value.includes(e)&&u.value.splice(u.value.indexOf(e),1),u.value.push(e)},j=async()=>{try{await _e.confirm("\u662F\u5426\u786E\u5B9A\u6E05\u7A7A\uFF1F","\u63D0\u793A"),await i.clear(),f.success("\u6E05\u7A7A\u6210\u529F"),C()}catch(e){console.log(e)}},x=g(""),u=g([]),N=(e,t)=>{u.value=t.map(a=>a.key)},M=({key:e,value:t},a)=>{t instanceof Array&&(["key","operate"].includes(a.property)||(u.value.includes(e)?u.value.splice(u.value.indexOf(e),1):u.value.push(e)))},O=({row:e,rowIndex:t})=>({"background-color":t%2==0?"rgb(236, 245, 255)":"rgb(245, 254, 240)"}),z=async e=>{let t=e.value;for(let a of t)a.active=!1;await i.set({[e.key]:_(t)}),f.success("\u8BBE\u7F6E\u6210\u529F")},F=async(e,t)=>{let a=e.value;for(let c of a)c.active=!1;a.find(c=>c.timestamp===t.timestamp).active=!0,console.log(_(a)),await i.set({[e.key]:_(a)}),f.success("\u8BBE\u7F6E\u6210\u529F")},J=async(e,t)=>{let a=e.value;const c=a.findIndex(r=>r.timestamp===t.timestamp);a.splice(c,1),await i.set({[e.key]:_(a)}),f.success("\u5220\u9664\u6210\u529F")},H=async(e,t)=>{let a=e.value;a.find(c=>c.timestamp===t.timestamp).name=t.name,await i.set({[e.key]:_(a)}),f.success("\u8BBE\u7F6E\u6210\u529F")},K=ae(()=>Z(()=>import("./ResponseTextDialog.70c6d971.js"),["assets/ResponseTextDialog.70c6d971.js","assets/ResponseTextDialog.2fb29c68.css","assets/vendor.1991cdbb.js","assets/vendor.00dccd5e.css","assets/Setting.18274e34.js","assets/Setting.f86a1a38.css","assets/plugin-vue_export-helper.21dcd24c.js"])),w=g(!1),E=g(),d=ne({timestamp:"",row:{},property:""}),L=function(e,t,a){["requestParams","requestBody","response"].includes(t.property)&&(E.value=e[t.property],w.value=!0,d.timestamp=e.timestamp,d.row=a,d.property=t.property)},Q=async e=>{console.log(e);let t=d.row.value;t.find(a=>a.timestamp===d.timestamp)[d.property]=e,await i.set({[d.row.key]:_(t)}),f.success("\u4FDD\u5B58\u6210\u529F")};return(e,t)=>{const a=fe,c=oe,r=le,P=se,v=ce,D=ve,G=re,W=ie,X=ue,Y=pe;return y(),de(me,null,[l(Y,{style:{height:"100%"}},{default:n(()=>[l(c,{height:"auto"},{default:n(()=>[l(a)]),_:1}),l(X,null,{default:n(()=>[l(r,{type:"primary",onClick:C},{default:n(()=>[he]),_:1}),l(r,{type:"danger",onClick:j},{default:n(()=>[ge]),_:1}),l(P,{modelValue:x.value,"onUpdate:modelValue":t[0]||(t[0]=o=>x.value=o),placeholder:"url\u8FC7\u6EE4",style:{"margin-left":"12px",width:"140px"},clearable:""},null,8,["modelValue"]),l(D,{data:q(h).filter(o=>o.key.includes(x.value)),column:B,style:{"margin-top":"10px"},"row-key":"key","expand-row-keys":u.value,onRowClick:M,onExpandChange:N,"row-style":O,stripe:!1},{expand:n(()=>[l(v,{type:"expand",align:"center"},{default:n(({row:o})=>[o.value instanceof Array?(y(),k(D,{key:0,data:o.value,column:T,"show-header":!1,class:"table-inside",onRowClick:(s,m)=>L(s,m,o)},{before:n(()=>[l(v,{align:"center",width:"100px"},{default:n(({row:s})=>[s.active?(y(),k(r,{key:0,type:"success",onClick:m=>z(o)},{default:n(()=>[ke]),_:2},1032,["onClick"])):(y(),k(r,{key:1,onClick:m=>F(o,s)},{default:n(()=>[Ce]),_:2},1032,["onClick"]))]),_:2},1024)]),after:n(()=>[l(v,{align:"center"},{default:n(({row:s})=>[l(P,{modelValue:s.name,"onUpdate:modelValue":m=>s.name=m,placeholder:"\u8F93\u5165\u540D\u79F0"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(v,{align:"center",width:"240px"},{default:n(({row:s})=>[l(r,{type:"primary",onClick:m=>H(o,s)},{default:n(()=>[p(A(s.name?"\u4FEE\u6539":"\u8BBE\u7F6E")+"\u540D\u79F0",1)]),_:2},1032,["onClick"]),l(r,{type:"danger",onClick:m=>J(o,s)},{default:n(()=>[we]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["data","onRowClick"])):b("",!0)]),_:1})]),url:n(()=>[l(v,{label:"url",prop:"key","min-width":"200px"},{default:n(({row:o})=>[l(G,{effect:"dark",content:o.key,placement:"top"},{default:n(()=>[p(A($(o.key)),1)]),_:2},1032,["content"])]),_:1})]),after:n(()=>[l(v,{label:"\u64CD\u4F5C",align:"center",prop:"operate",width:"340px"},{default:n(({row:o})=>[I(o)?(y(),k(r,{key:0,type:"warning",onClick:s=>R(o)},{default:n(()=>[xe]),_:2},1032,["onClick"])):b("",!0),l(r,{type:"primary",onClick:s=>S(o)},{default:n(()=>[be]),_:2},1032,["onClick"]),l(W,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",onConfirm:s=>U(o)},{reference:n(()=>[l(r,{type:"danger"},{default:n(()=>[Ve]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data","expand-row-keys"])]),_:1})]),_:1}),w.value?(y(),k(q(K),{key:0,modelValue:w.value,"onUpdate:modelValue":t[1]||(t[1]=o=>w.value=o),data:E.value,onChange:Q},null,8,["modelValue","data"])):b("",!0)],64)}}};var $e=ye(Ee,[["__scopeId","data-v-e1626548"]]);export{$e as default};
