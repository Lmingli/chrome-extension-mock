import{_ as U}from"./index.553685af.js";import{R as M,m as F,k as x,S as W,l as z,T as J,q as K,Q as L,U as Q,o as f,g as G,a as s,s as H,w as o,u as V,c as k,i as b,F as X,V as Y,x as m,v as y,j as p,t as Z}from"./vendor.8352d539.js";import{s as r,_ as ee,a as ae}from"./Setting.cca2d8cf.js";import"./plugin-vue_export-helper.21dcd24c.js";const te={style:{"margin-top":"30px"}},oe=p("\u5237\u65B0"),ne=p("\u5168\u90E8\u6E05\u7A7A"),se=p("\u5F53\u524D"),le=p("\u9009\u62E9"),ce=p("\u5220\u9664"),re=p("\u5220\u9664"),_e={setup(ie){console.log(r);const g=M([]),E=[{slot:"expand"},{label:"key",prop:"key"},{label:"count",prop:"count",minWidth:"200px"}],v=async()=>{try{const e=await r.get();g.value=Object.entries(e).map(a=>({key:a[0],value:a[1],count:a[1]instanceof Array?a[1].length:JSON.stringify(a[1])}))}catch(e){console.log(e)}};F(()=>{try{v(),r.onchange(v)}catch(e){console.log(e)}});const B=[{label:"method",prop:"method"},{label:"requestParams",prop:"requestParams"},{label:"requestBody",prop:"requestBody"},{label:"response",prop:"response",minWidth:"300%"}],D=async({key:e})=>{await r.remove(e),m.success("\u5220\u9664\u6210\u529F"),g.value.splice(g.value.findIndex(a=>a.key===e),1)},T=async()=>{try{await Y.confirm("\u662F\u5426\u786E\u5B9A\u6E05\u7A7A\uFF1F","\u63D0\u793A"),await r.clear(),m.success("\u6E05\u7A7A\u6210\u529F"),v()}catch(e){console.log(e)}},d=x([]),j=(e,a)=>{d.value=a.map(t=>t.key)},P=({key:e,value:a},t)=>{a instanceof Array&&t.property!=="operate"&&(d.value.includes(e)?d.value.splice(d.value.indexOf(e),1):d.value.push(e))},R=async(e,a)=>{let t=e.value;for(let n of t)n.active=!1;t.find(n=>n.timestamp===a.timestamp).active=!0,console.log(y(t)),await r.set({[e.key]:y(t)}),m.success("\u8BBE\u7F6E\u6210\u529F")},A=async(e,a)=>{let t=e.value;const n=t.findIndex(i=>i.timestamp===a.timestamp);t.splice(n,1),await r.set({[e.key]:y(t)}),m.success("\u5220\u9664\u6210\u529F")},N=async(e,a)=>{let t=e.value;t.find(n=>n.timestamp===a.timestamp).name=a.name,await r.set({[e.key]:y(t)}),m.success("\u8BBE\u7F6E\u6210\u529F")},q=W(()=>U(()=>import("./ResponseTextDialog.9826a634.js"),["assets/ResponseTextDialog.9826a634.js","assets/ResponseTextDialog.bb060b93.css","assets/vendor.8352d539.js","assets/vendor.00dccd5e.css","assets/index.553685af.js","assets/index.c9586d37.css","assets/Setting.cca2d8cf.js","assets/Setting.d9c487a5.css","assets/plugin-vue_export-helper.21dcd24c.js"])),h=x(!1),C=x(),_=z({timestamp:"",row:{}}),I=function(e,a,t){console.log(e,a,t),a.property==="response"&&(C.value=e.response,h.value=!0,_.timestamp=e.timestamp,_.row=t)},$=async e=>{console.log(e);let a=_.row.value;a.find(t=>t.timestamp===_.timestamp).response=e,await r.set({[_.row.key]:y(a)}),m.success("\u4FDD\u5B58\u6210\u529F")};return(e,a)=>{const t=ee,n=J,i=K,O=L,w=ae,S=Q;return f(),G(X,null,[s(t,{style:{"padding-top":"10px"}}),H("div",te,[s(n,{type:"primary",onClick:v},{default:o(()=>[oe]),_:1}),s(n,{type:"danger",onClick:T},{default:o(()=>[ne]),_:1}),s(w,{data:V(g),column:E,style:{"margin-top":"10px"},"row-key":"key","expand-row-keys":d.value,onRowClick:P,onExpandChange:j},{expand:o(()=>[s(i,{type:"expand",align:"center"},{default:o(({row:c})=>[c.value instanceof Array?(f(),k(w,{key:0,data:c.value,column:B,"show-header":!1,style:{"padding-left":"40px"},onRowClick:(l,u)=>I(l,u,c)},{before:o(()=>[s(i,{align:"center",width:"100px"},{default:o(({row:l})=>[l.active?(f(),k(n,{key:0,type:"success"},{default:o(()=>[se]),_:1})):(f(),k(n,{key:1,onClick:u=>R(c,l)},{default:o(()=>[le]),_:2},1032,["onClick"]))]),_:2},1024)]),after:o(()=>[s(i,{align:"center"},{default:o(({row:l})=>[s(O,{modelValue:l.name,"onUpdate:modelValue":u=>l.name=u,placeholder:"\u8F93\u5165\u540D\u79F0"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),s(i,{align:"center",width:"240px"},{default:o(({row:l})=>[s(n,{type:"primary",onClick:u=>N(c,l)},{default:o(()=>[p(Z(l.name?"\u4FEE\u6539":"\u8BBE\u7F6E")+"\u540D\u79F0",1)]),_:2},1032,["onClick"]),s(n,{type:"danger",onClick:u=>A(c,l)},{default:o(()=>[ce]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["data","onRowClick"])):b("",!0)]),_:1})]),after:o(()=>[s(i,{label:"\u64CD\u4F5C",align:"center",width:"120px",prop:"operate"},{default:o(({row:c})=>[s(S,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",onConfirm:l=>D(c)},{reference:o(()=>[s(n,{type:"danger"},{default:o(()=>[re]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data","expand-row-keys"])]),h.value?(f(),k(V(q),{key:0,modelValue:h.value,"onUpdate:modelValue":a[0]||(a[0]=c=>h.value=c),data:C.value,onChange:$},null,8,["modelValue","data"])):b("",!0)],64)}}};export{_e as default};
