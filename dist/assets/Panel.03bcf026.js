import{_ as U}from"./index.98495b72.js";import{a1 as F,m as z,k as C,a2 as J,l as K,a0 as L,q as W,Y,a3 as G,o as y,g as H,a as s,s as Q,w as o,u as V,c as k,i as b,F as X,a4 as Z,x as d,v as _,j as u,t as ee}from"./vendor.a2c2920f.js";import{s as i,_ as ae,a as te}from"./Setting.ff7cf0f8.js";import"./plugin-vue_export-helper.21dcd24c.js";const oe={style:{"margin-top":"30px"}},ne=u("\u5237\u65B0"),se=u("\u5168\u90E8\u6E05\u7A7A"),le=u("\u5F53\u524D"),ce=u("\u9009\u62E9"),ie=u("\u5220\u9664"),re=u("\u5220\u9664"),fe={setup(pe){console.log(i);const v=F([]),E=[{slot:"expand"},{label:"key",prop:"key"},{label:"count",prop:"count",minWidth:"200px"}],g=async()=>{try{const e=await i.get();v.value=Object.entries(e).map(a=>({key:a[0],value:a[1],count:a[1]instanceof Array?a[1].length:JSON.stringify(a[1])}))}catch(e){console.log(e)}};z(()=>{try{g(),i.onchange(g)}catch(e){console.log(e)}});const D=[{label:"method",prop:"method"},{label:"requestParams",prop:"requestParams"},{label:"requestBody",prop:"requestBody"},{label:"response",prop:"response","show-overflow-tooltip":!0}],B=async({key:e})=>{await i.remove(e),d.success("\u5220\u9664\u6210\u529F"),v.value.splice(v.value.findIndex(a=>a.key===e),1)},j=async()=>{try{await Z.confirm("\u662F\u5426\u786E\u5B9A\u6E05\u7A7A\uFF1F","\u63D0\u793A"),await i.clear(),d.success("\u6E05\u7A7A\u6210\u529F"),g()}catch(e){console.log(e)}},m=C([]),A=(e,a)=>{m.value=a.map(t=>t.key)},P=({key:e,value:a},t)=>{a instanceof Array&&t.property!=="operate"&&(m.value.includes(e)?m.value.splice(m.value.indexOf(e),1):m.value.push(e))},T=async e=>{let a=e.value;for(let t of a)t.active=!1;await i.set({[e.key]:_(a)}),d.success("\u8BBE\u7F6E\u6210\u529F")},N=async(e,a)=>{let t=e.value;for(let n of t)n.active=!1;t.find(n=>n.timestamp===a.timestamp).active=!0,console.log(_(t)),await i.set({[e.key]:_(t)}),d.success("\u8BBE\u7F6E\u6210\u529F")},R=async(e,a)=>{let t=e.value;const n=t.findIndex(r=>r.timestamp===a.timestamp);t.splice(n,1),await i.set({[e.key]:_(t)}),d.success("\u5220\u9664\u6210\u529F")},$=async(e,a)=>{let t=e.value;t.find(n=>n.timestamp===a.timestamp).name=a.name,await i.set({[e.key]:_(t)}),d.success("\u8BBE\u7F6E\u6210\u529F")},q=J(()=>U(()=>import("./ResponseTextDialog.33d9e1d6.js"),["assets/ResponseTextDialog.33d9e1d6.js","assets/ResponseTextDialog.bb060b93.css","assets/vendor.a2c2920f.js","assets/vendor.00dccd5e.css","assets/Setting.ff7cf0f8.js","assets/Setting.17088995.css","assets/plugin-vue_export-helper.21dcd24c.js"])),h=C(!1),x=C(),f=K({timestamp:"",row:{}}),I=function(e,a,t){console.log(e,a,t),a.property==="response"&&(x.value=e.response,h.value=!0,f.timestamp=e.timestamp,f.row=t)},O=async e=>{console.log(e);let a=f.row.value;a.find(t=>t.timestamp===f.timestamp).response=e,await i.set({[f.row.key]:_(a)}),d.success("\u4FDD\u5B58\u6210\u529F")};return(e,a)=>{const t=ae,n=L,r=W,M=Y,w=te,S=G;return y(),H(X,null,[s(t),Q("div",oe,[s(n,{type:"primary",onClick:g},{default:o(()=>[ne]),_:1}),s(n,{type:"danger",onClick:j},{default:o(()=>[se]),_:1}),s(w,{data:V(v),column:E,style:{"margin-top":"10px"},"row-key":"key","expand-row-keys":m.value,onRowClick:P,onExpandChange:A},{expand:o(()=>[s(r,{type:"expand",align:"center"},{default:o(({row:c})=>[c.value instanceof Array?(y(),k(w,{key:0,data:c.value,column:D,"show-header":!1,style:{"padding-left":"40px"},onRowClick:(l,p)=>I(l,p,c)},{before:o(()=>[s(r,{align:"center",width:"100px"},{default:o(({row:l})=>[l.active?(y(),k(n,{key:0,type:"success",onClick:p=>T(c)},{default:o(()=>[le]),_:2},1032,["onClick"])):(y(),k(n,{key:1,onClick:p=>N(c,l)},{default:o(()=>[ce]),_:2},1032,["onClick"]))]),_:2},1024)]),after:o(()=>[s(r,{align:"center"},{default:o(({row:l})=>[s(M,{modelValue:l.name,"onUpdate:modelValue":p=>l.name=p,placeholder:"\u8F93\u5165\u540D\u79F0"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),s(r,{align:"center",width:"240px"},{default:o(({row:l})=>[s(n,{type:"primary",onClick:p=>$(c,l)},{default:o(()=>[u(ee(l.name?"\u4FEE\u6539":"\u8BBE\u7F6E")+"\u540D\u79F0",1)]),_:2},1032,["onClick"]),s(n,{type:"danger",onClick:p=>R(c,l)},{default:o(()=>[ie]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["data","onRowClick"])):b("",!0)]),_:1})]),after:o(()=>[s(r,{label:"\u64CD\u4F5C",align:"center",width:"120px",prop:"operate"},{default:o(({row:c})=>[s(S,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",onConfirm:l=>B(c)},{reference:o(()=>[s(n,{type:"danger"},{default:o(()=>[re]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data","expand-row-keys"])]),h.value?(y(),k(V(q),{key:0,modelValue:h.value,"onUpdate:modelValue":a[0]||(a[0]=c=>h.value=c),data:x.value,onChange:O},null,8,["modelValue","data"])):b("",!0)],64)}}};export{fe as default};
