import{_ as W}from"./index.2aa5916b.js";import{k as h,a7 as G,m as X,a8 as Y,l as Z,a9 as ee,P as te,Q as ae,q as ne,a6 as oe,aa as le,ab as se,o as y,g as ce,a as o,w as n,c as g,u as A,i as V,F as re,v as m,x as _,j as u,t as ie,ac as ue}from"./vendor.a931ea3f.js";import{s as r,_ as pe,a as de}from"./Setting.b2cfcd2a.js";import{_ as me}from"./plugin-vue_export-helper.21dcd24c.js";const _e=u("\u5237\u65B0"),fe=u("\u5168\u90E8\u6E05\u7A7A"),ye=u("\u5F53\u524D"),ve=u("\u9009\u62E9"),he=u("\u5220\u9664"),ge=u("\u53D6\u6D88\u5DF2\u9009\u62E9"),ke=u("\u5220\u9664"),Ce={setup(we){console.log(r);const E=h({}),k=G([]),B=[{slot:"expand"},{label:"url",prop:"key",formatter:(e,t,a,i)=>{let s=a;for(let x of E.value.listUrlRemoveStr)s=s.replace(x,"");return s},minWidth:"200px"},{label:"count",prop:"count"},{label:"size",prop:"size"}],C=async()=>{try{const e=await r.get();let t=[];for(let a in e){if(a==="setting"){E.value=e[a];continue}a!=="tmp"&&t.push({key:a,value:e[a],count:e[a]instanceof Array?e[a].length:JSON.stringify(e[a]),size:JSON.stringify(e[a]).length})}k.value=t}catch(e){console.log(e)}};X(()=>{try{C(),r.onchange(C)}catch(e){console.log(e)}});const $=[{label:"method",prop:"method"},{label:"requestParams",prop:"requestParams"},{label:"requestBody",prop:"requestBody","show-overflow-tooltip":!0},{label:"response",prop:"response","show-overflow-tooltip":!0}],q=async({key:e})=>{await r.remove(e),_.success("\u5220\u9664\u6210\u529F"),k.value.splice(k.value.findIndex(t=>t.key===e),1)},R=({value:e})=>e.findIndex(t=>t.active===!0)>-1,S=async({key:e,value:t})=>{t.find(a=>a.active===!0).active=!1,await r.set({[e]:m(t)})},T=async()=>{try{await ue.confirm("\u662F\u5426\u786E\u5B9A\u6E05\u7A7A\uFF1F","\u63D0\u793A"),await r.clear(),_.success("\u6E05\u7A7A\u6210\u529F"),C()}catch(e){console.log(e)}},b=h(""),f=h([]),U=(e,t)=>{f.value=t.map(a=>a.key)},j=({key:e,value:t},a)=>{t instanceof Array&&(["key","operate"].includes(a.property)||(f.value.includes(e)?f.value.splice(f.value.indexOf(e),1):f.value.push(e)))},I=({row:e,rowIndex:t})=>(console.log(t),{"background-color":t%2==0?"rgb(236, 245, 255)":"rgb(245, 254, 240)"}),N=async e=>{let t=e.value;for(let a of t)a.active=!1;await r.set({[e.key]:m(t)}),_.success("\u8BBE\u7F6E\u6210\u529F")},M=async(e,t)=>{let a=e.value;for(let i of a)i.active=!1;a.find(i=>i.timestamp===t.timestamp).active=!0,console.log(m(a)),await r.set({[e.key]:m(a)}),_.success("\u8BBE\u7F6E\u6210\u529F")},z=async(e,t)=>{let a=e.value;const i=a.findIndex(s=>s.timestamp===t.timestamp);a.splice(i,1),await r.set({[e.key]:m(a)}),_.success("\u5220\u9664\u6210\u529F")},O=async(e,t)=>{let a=e.value;a.find(i=>i.timestamp===t.timestamp).name=t.name,await r.set({[e.key]:m(a)}),_.success("\u8BBE\u7F6E\u6210\u529F")},F=Y(()=>W(()=>import("./ResponseTextDialog.84ceba3e.js"),["assets/ResponseTextDialog.84ceba3e.js","assets/ResponseTextDialog.2fb29c68.css","assets/vendor.a931ea3f.js","assets/vendor.00dccd5e.css","assets/Setting.b2cfcd2a.js","assets/Setting.430c8f95.css","assets/plugin-vue_export-helper.21dcd24c.js"])),w=h(!1),D=h(),p=Z({timestamp:"",row:{},property:""}),H=function(e,t,a){["requestParams","requestBody","response"].includes(t.property)&&(D.value=e[t.property],w.value=!0,p.timestamp=e.timestamp,p.row=a,p.property=t.property)},J=async e=>{console.log(e);let t=p.row.value;t.find(a=>a.timestamp===p.timestamp)[p.property]=e,await r.set({[p.row.key]:m(t)}),_.success("\u4FDD\u5B58\u6210\u529F")};return(e,t)=>{const a=pe,i=ee,s=te,x=ae,v=ne,P=de,K=oe,L=le,Q=se;return y(),ce(re,null,[o(Q,{style:{height:"100%"}},{default:n(()=>[o(i,{height:"auto"},{default:n(()=>[o(a)]),_:1}),o(L,null,{default:n(()=>[o(s,{type:"primary",onClick:C},{default:n(()=>[_e]),_:1}),o(s,{type:"danger",onClick:T},{default:n(()=>[fe]),_:1}),o(x,{modelValue:b.value,"onUpdate:modelValue":t[0]||(t[0]=l=>b.value=l),placeholder:"url\u8FC7\u6EE4",style:{"margin-left":"12px",width:"140px"},clearable:""},null,8,["modelValue"]),o(P,{data:A(k).filter(l=>l.key.includes(b.value)),column:B,style:{"margin-top":"10px"},"row-key":"key","expand-row-keys":f.value,onRowClick:j,onExpandChange:U,"row-style":I,stripe:!1},{expand:n(()=>[o(v,{type:"expand",align:"center"},{default:n(({row:l})=>[l.value instanceof Array?(y(),g(P,{key:0,data:l.value,column:$,"show-header":!1,class:"table-inside",onRowClick:(c,d)=>H(c,d,l)},{before:n(()=>[o(v,{align:"center",width:"100px"},{default:n(({row:c})=>[c.active?(y(),g(s,{key:0,type:"success",onClick:d=>N(l)},{default:n(()=>[ye]),_:2},1032,["onClick"])):(y(),g(s,{key:1,onClick:d=>M(l,c)},{default:n(()=>[ve]),_:2},1032,["onClick"]))]),_:2},1024)]),after:n(()=>[o(v,{align:"center"},{default:n(({row:c})=>[o(x,{modelValue:c.name,"onUpdate:modelValue":d=>c.name=d,placeholder:"\u8F93\u5165\u540D\u79F0"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),o(v,{align:"center",width:"240px"},{default:n(({row:c})=>[o(s,{type:"primary",onClick:d=>O(l,c)},{default:n(()=>[u(ie(c.name?"\u4FEE\u6539":"\u8BBE\u7F6E")+"\u540D\u79F0",1)]),_:2},1032,["onClick"]),o(s,{type:"danger",onClick:d=>z(l,c)},{default:n(()=>[he]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["data","onRowClick"])):V("",!0)]),_:1})]),after:n(()=>[o(v,{label:"\u64CD\u4F5C",align:"center",prop:"operate",width:"300px"},{default:n(({row:l})=>[R(l)?(y(),g(s,{key:0,type:"warning",onClick:c=>S(l)},{default:n(()=>[ge]),_:2},1032,["onClick"])):V("",!0),o(K,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",onConfirm:c=>q(l)},{reference:n(()=>[o(s,{type:"danger"},{default:n(()=>[ke]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data","expand-row-keys"])]),_:1})]),_:1}),w.value?(y(),g(A(F),{key:0,modelValue:w.value,"onUpdate:modelValue":t[1]||(t[1]=l=>w.value=l),data:D.value,onChange:J},null,8,["modelValue","data"])):V("",!0)],64)}}};var De=me(Ce,[["__scopeId","data-v-60ddeaf3"]]);export{De as default};
