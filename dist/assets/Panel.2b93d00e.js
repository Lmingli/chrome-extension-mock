import{_ as M}from"./index.04113011.js";import{R as F,m as z,k as x,S as J,l as K,T as L,q as Q,Q as W,U as G,o as y,g as H,a as s,s as X,w as o,u as V,c as k,i as b,F as Y,V as Z,x as d,v as _,j as u,t as ee}from"./vendor.8352d539.js";import{s as i,_ as te,a as ae}from"./Setting.cca2d8cf.js";import"./plugin-vue_export-helper.21dcd24c.js";const oe={style:{"margin-top":"30px"}},ne=u("\u5237\u65B0"),se=u("\u5168\u90E8\u6E05\u7A7A"),le=u("\u5F53\u524D"),ce=u("\u9009\u62E9"),ie=u("\u5220\u9664"),re=u("\u5220\u9664"),fe={setup(pe){console.log(i);const v=F([]),E=[{slot:"expand"},{label:"key",prop:"key"},{label:"count",prop:"count",minWidth:"200px"}],g=async()=>{try{const e=await i.get();v.value=Object.entries(e).map(t=>({key:t[0],value:t[1],count:t[1]instanceof Array?t[1].length:JSON.stringify(t[1])}))}catch(e){console.log(e)}};z(()=>{try{g(),i.onchange(g)}catch(e){console.log(e)}});const B=[{label:"method",prop:"method"},{label:"requestParams",prop:"requestParams"},{label:"requestBody",prop:"requestBody"},{label:"response",prop:"response","show-overflow-tooltip":!0}],D=async({key:e})=>{await i.remove(e),d.success("\u5220\u9664\u6210\u529F"),v.value.splice(v.value.findIndex(t=>t.key===e),1)},T=async()=>{try{await Z.confirm("\u662F\u5426\u786E\u5B9A\u6E05\u7A7A\uFF1F","\u63D0\u793A"),await i.clear(),d.success("\u6E05\u7A7A\u6210\u529F"),g()}catch(e){console.log(e)}},m=x([]),j=(e,t)=>{m.value=t.map(a=>a.key)},A=({key:e,value:t},a)=>{t instanceof Array&&a.property!=="operate"&&(m.value.includes(e)?m.value.splice(m.value.indexOf(e),1):m.value.push(e))},P=async e=>{let t=e.value;for(let a of t)a.active=!1;await i.set({[e.key]:_(t)}),d.success("\u8BBE\u7F6E\u6210\u529F")},R=async(e,t)=>{let a=e.value;for(let n of a)n.active=!1;a.find(n=>n.timestamp===t.timestamp).active=!0,console.log(_(a)),await i.set({[e.key]:_(a)}),d.success("\u8BBE\u7F6E\u6210\u529F")},N=async(e,t)=>{let a=e.value;const n=a.findIndex(r=>r.timestamp===t.timestamp);a.splice(n,1),await i.set({[e.key]:_(a)}),d.success("\u5220\u9664\u6210\u529F")},$=async(e,t)=>{let a=e.value;a.find(n=>n.timestamp===t.timestamp).name=t.name,await i.set({[e.key]:_(a)}),d.success("\u8BBE\u7F6E\u6210\u529F")},q=J(()=>M(()=>import("./ResponseTextDialog.2a911a61.js"),["assets/ResponseTextDialog.2a911a61.js","assets/ResponseTextDialog.bb060b93.css","assets/vendor.8352d539.js","assets/vendor.00dccd5e.css","assets/index.04113011.js","assets/index.c9586d37.css","assets/Setting.cca2d8cf.js","assets/Setting.d9c487a5.css","assets/plugin-vue_export-helper.21dcd24c.js"])),h=x(!1),C=x(),f=K({timestamp:"",row:{}}),I=function(e,t,a){console.log(e,t,a),t.property==="response"&&(C.value=e.response,h.value=!0,f.timestamp=e.timestamp,f.row=a)},O=async e=>{console.log(e);let t=f.row.value;t.find(a=>a.timestamp===f.timestamp).response=e,await i.set({[f.row.key]:_(t)}),d.success("\u4FDD\u5B58\u6210\u529F")};return(e,t)=>{const a=te,n=L,r=Q,S=W,w=ae,U=G;return y(),H(Y,null,[s(a,{style:{"padding-top":"10px"}}),X("div",oe,[s(n,{type:"primary",onClick:g},{default:o(()=>[ne]),_:1}),s(n,{type:"danger",onClick:T},{default:o(()=>[se]),_:1}),s(w,{data:V(v),column:E,style:{"margin-top":"10px"},"row-key":"key","expand-row-keys":m.value,onRowClick:A,onExpandChange:j},{expand:o(()=>[s(r,{type:"expand",align:"center"},{default:o(({row:c})=>[c.value instanceof Array?(y(),k(w,{key:0,data:c.value,column:B,"show-header":!1,style:{"padding-left":"40px"},onRowClick:(l,p)=>I(l,p,c)},{before:o(()=>[s(r,{align:"center",width:"100px"},{default:o(({row:l})=>[l.active?(y(),k(n,{key:0,type:"success",onClick:p=>P(c)},{default:o(()=>[le]),_:2},1032,["onClick"])):(y(),k(n,{key:1,onClick:p=>R(c,l)},{default:o(()=>[ce]),_:2},1032,["onClick"]))]),_:2},1024)]),after:o(()=>[s(r,{align:"center"},{default:o(({row:l})=>[s(S,{modelValue:l.name,"onUpdate:modelValue":p=>l.name=p,placeholder:"\u8F93\u5165\u540D\u79F0"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),s(r,{align:"center",width:"240px"},{default:o(({row:l})=>[s(n,{type:"primary",onClick:p=>$(c,l)},{default:o(()=>[u(ee(l.name?"\u4FEE\u6539":"\u8BBE\u7F6E")+"\u540D\u79F0",1)]),_:2},1032,["onClick"]),s(n,{type:"danger",onClick:p=>N(c,l)},{default:o(()=>[ie]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["data","onRowClick"])):b("",!0)]),_:1})]),after:o(()=>[s(r,{label:"\u64CD\u4F5C",align:"center",width:"120px",prop:"operate"},{default:o(({row:c})=>[s(U,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",onConfirm:l=>D(c)},{reference:o(()=>[s(n,{type:"danger"},{default:o(()=>[re]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data","expand-row-keys"])]),h.value?(y(),k(V(q),{key:0,modelValue:h.value,"onUpdate:modelValue":t[0]||(t[0]=c=>h.value=c),data:C.value,onChange:O},null,8,["modelValue","data"])):b("",!0)],64)}}};export{fe as default};
