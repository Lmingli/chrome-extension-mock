import{_ as te}from"./index.677e47bd.js";import{k as g,a7 as ae,m as ne,a5 as oe,l as le,a8 as se,P as ce,Q as re,q as ie,J as ue,a9 as pe,aa as de,ab as me,o as y,g as _e,a as o,w as n,c as k,u as D,i as b,F as fe,v as f,x as d,j as u,t as q,ac as B}from"./vendor.6a1e0da2.js";import{s as c,_ as ve,a as ye}from"./Setting.813e08c1.js";import{_ as he}from"./plugin-vue_export-helper.21dcd24c.js";const ge=u("\u5237\u65B0"),ke=u("\u5168\u90E8\u6E05\u7A7A"),we=u("\u53D6\u6D88\u5168\u90E8\u5DF2\u9009\u62E9"),xe=u("\u5F53\u524D"),Ce=u("\u9009\u62E9"),be=u("\u5220\u9664"),Ve=u("\u53D6\u6D88\u5DF2\u9009\u62E9"),Ee=u("\u65B0\u589E"),Pe=u("\u5220\u9664"),Ae={setup(De){console.log(c);const V=g({}),h=ae([]),$=[{slot:"expand"},{slot:"url"},{label:"count",prop:"count"},{label:"size",prop:"size"}],R=e=>{let t=e;for(let a of V.value.listUrlRemoveStr)t=t.replace(a,"");return t},w=async()=>{try{const e=await c.get();let t=[];for(let a in e){if(a==="setting"){V.value=e[a];continue}a!=="tmp"&&t.push({key:a,value:e[a],count:e[a]instanceof Array?e[a].length:JSON.stringify(e[a]),size:JSON.stringify(e[a]).length})}h.value=t}catch(e){console.log(e)}};ne(()=>{try{w(),c.onchange(w)}catch(e){console.log(e)}});const T=[{label:"method",prop:"method",width:"70px"},{label:"requestParams",prop:"requestParams","show-overflow-tooltip":!0},{label:"requestBody",prop:"requestBody","show-overflow-tooltip":!0},{label:"response",prop:"response","show-overflow-tooltip":!0,minWidth:"100px"}],U=async({key:e})=>{await c.remove(e),d.success("\u5220\u9664\u6210\u529F"),h.value.splice(h.value.findIndex(t=>t.key===e),1)},I=({value:e})=>e.findIndex(t=>t.active===!0)>-1,S=async({key:e,value:t})=>{t.find(a=>a.active===!0).active=!1,await c.set({[e]:f(t)})},j=({key:e})=>{const t=h.value.find(i=>i.key===e),a=t.value[t.value.length-1];t.value.push({active:!1,method:a.method,name:"",requestBody:"{}",requestParams:"{}",response:"{}",timestamp:Date.now()}),p.value.includes(e)&&p.value.splice(p.value.indexOf(e),1),p.value.push(e)},N=async()=>{try{await B.confirm("\u662F\u5426\u786E\u5B9A\u6E05\u7A7A\uFF1F","\u63D0\u793A"),await c.clear(),d.success("\u6E05\u7A7A\u6210\u529F"),w()}catch(e){console.log(e)}},M=async()=>{try{await B.confirm("\u53D6\u6D88\u5168\u90E8\u5DF2\u9009\u62E9","\u63D0\u793A");let e=await c.get();for(let t in e)if(e[t]&&e[t]instanceof Array)for(let a of e[t])a.active===!0&&(a.active=!1);await c.set(e),d.success("\u64CD\u4F5C\u6210\u529F")}catch(e){console.log(e)}},C=g(""),p=g([]),O=(e,t)=>{p.value=t.map(a=>a.key)},z=({key:e,value:t},a)=>{t instanceof Array&&(["key","operate"].includes(a.property)||(p.value.includes(e)?p.value.splice(p.value.indexOf(e),1):p.value.push(e)))},F=({row:e,rowIndex:t})=>({"background-color":t%2==0?"rgb(236, 245, 255)":"rgb(245, 254, 240)"}),J=async e=>{let t=e.value;for(let a of t)a.active=!1;await c.set({[e.key]:f(t)}),d.success("\u8BBE\u7F6E\u6210\u529F")},H=async(e,t)=>{let a=e.value;for(let i of a)i.active=!1;a.find(i=>i.timestamp===t.timestamp).active=!0,console.log(f(a)),await c.set({[e.key]:f(a)}),d.success("\u8BBE\u7F6E\u6210\u529F")},K=async(e,t)=>{let a=e.value;const i=a.findIndex(r=>r.timestamp===t.timestamp);a.splice(i,1),await c.set({[e.key]:f(a)}),d.success("\u5220\u9664\u6210\u529F")},L=async(e,t)=>{let a=e.value;a.find(i=>i.timestamp===t.timestamp).name=t.name,await c.set({[e.key]:f(a)}),d.success("\u8BBE\u7F6E\u6210\u529F")},Q=oe(()=>te(()=>import("./ResponseTextDialog.f2f9350e.js"),["assets/ResponseTextDialog.f2f9350e.js","assets/ResponseTextDialog.2fb29c68.css","assets/vendor.6a1e0da2.js","assets/vendor.00dccd5e.css","assets/Setting.813e08c1.js","assets/Setting.f86a1a38.css","assets/index.677e47bd.js","assets/index.c9586d37.css","assets/plugin-vue_export-helper.21dcd24c.js"])),x=g(!1),E=g(),m=le({timestamp:"",row:{},property:""}),W=function(e,t,a){["requestParams","requestBody","response"].includes(t.property)&&(E.value=e[t.property],x.value=!0,m.timestamp=e.timestamp,m.row=a,m.property=t.property)},G=async e=>{console.log(e);let t=m.row.value;t.find(a=>a.timestamp===m.timestamp)[m.property]=e,await c.set({[m.row.key]:f(t)}),d.success("\u4FDD\u5B58\u6210\u529F")};return(e,t)=>{const a=ve,i=se,r=ce,P=re,v=ie,A=ye,X=ue,Y=pe,Z=de,ee=me;return y(),_e(fe,null,[o(ee,{style:{height:"100%"}},{default:n(()=>[o(i,{height:"auto"},{default:n(()=>[o(a)]),_:1}),o(Z,null,{default:n(()=>[o(r,{type:"primary",onClick:w},{default:n(()=>[ge]),_:1}),o(r,{type:"danger",onClick:N},{default:n(()=>[ke]),_:1}),o(P,{modelValue:C.value,"onUpdate:modelValue":t[0]||(t[0]=l=>C.value=l),placeholder:"url\u8FC7\u6EE4",style:{"margin-left":"12px",width:"140px"},clearable:""},null,8,["modelValue"]),o(r,{type:"warning",style:{"margin-left":"12px"},onClick:M},{default:n(()=>[we]),_:1}),o(A,{data:D(h).filter(l=>l.key.includes(C.value)),column:$,style:{"margin-top":"10px"},"row-key":"key","expand-row-keys":p.value,onRowClick:z,onExpandChange:O,"row-style":F,stripe:!1},{expand:n(()=>[o(v,{type:"expand",align:"center"},{default:n(({row:l})=>[l.value instanceof Array?(y(),k(A,{key:0,data:l.value,column:T,"show-header":!1,class:"table-inside",onRowClick:(s,_)=>W(s,_,l)},{before:n(()=>[o(v,{align:"center",width:"90px"},{default:n(({row:s})=>[s.active?(y(),k(r,{key:0,type:"success",onClick:_=>J(l)},{default:n(()=>[xe]),_:2},1032,["onClick"])):(y(),k(r,{key:1,onClick:_=>H(l,s)},{default:n(()=>[Ce]),_:2},1032,["onClick"]))]),_:2},1024)]),after:n(()=>[o(v,{align:"center",width:"104px"},{default:n(({row:s})=>[o(P,{modelValue:s.name,"onUpdate:modelValue":_=>s.name=_,placeholder:"\u8F93\u5165\u540D\u79F0"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),o(v,{align:"center",width:"220px"},{default:n(({row:s})=>[o(r,{type:"primary",onClick:_=>L(l,s)},{default:n(()=>[u(q(s.name?"\u4FEE\u6539":"\u8BBE\u7F6E")+"\u540D\u79F0",1)]),_:2},1032,["onClick"]),o(r,{type:"danger",onClick:_=>K(l,s)},{default:n(()=>[be]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["data","onRowClick"])):b("",!0)]),_:1})]),url:n(()=>[o(v,{label:"url",prop:"key","min-width":"200px"},{default:n(({row:l})=>[o(X,{effect:"dark",content:l.key,placement:"top"},{default:n(()=>[u(q(R(l.key)),1)]),_:2},1032,["content"])]),_:1})]),after:n(()=>[o(v,{label:"\u64CD\u4F5C",align:"center",prop:"operate",width:"340px"},{default:n(({row:l})=>[I(l)?(y(),k(r,{key:0,type:"warning",onClick:s=>S(l)},{default:n(()=>[Ve]),_:2},1032,["onClick"])):b("",!0),o(r,{type:"primary",onClick:s=>j(l)},{default:n(()=>[Ee]),_:2},1032,["onClick"]),o(Y,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",onConfirm:s=>U(l)},{reference:n(()=>[o(r,{type:"danger"},{default:n(()=>[Pe]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data","expand-row-keys"])]),_:1})]),_:1}),x.value?(y(),k(D(Q),{key:0,modelValue:x.value,"onUpdate:modelValue":t[1]||(t[1]=l=>x.value=l),data:E.value,onChange:G},null,8,["modelValue","data"])):b("",!0)],64)}}};var Te=he(Ae,[["__scopeId","data-v-81760d28"]]);export{Te as default};
